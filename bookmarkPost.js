!function(t){let _=JSON.parse(localStorage.getItem("pukuBm"))||[],e=()=>{localStorage.setItem("pukuBm",JSON.stringify(_)),sAt(eqS(t,".hBook label"),"count",_.length);let e=eqS(t,".Bookmark"),$="";_.length>0?(_.forEach(t=>{$+='<ul><li id="'+t.id+'"><a href="'+t.url+'" title="'+t.title+'">'+t.title+'</a><span class="bmDel">'+PuSet.bookmark.bmDelIcon+'</span></li></ul>'}),e&&(e.innerHTML=$)):e&&(e.innerHTML=PuSet.bookmark.noBmText),i()},$=t=>{_.push(t),e()},l=$=>{_=_.filter(t=>t.id!==$),e(),egId(t,"bm-"+$)&&(egId(t,"bm-"+$).checked=!1),tsNotif(PuSet.bookmark.removedBmText)},i=()=>{let _=eqSA(t,".bmDel");_.length>0&&_.forEach(t=>{let _=gAt(t.parentNode,"id");aE(t,"click",()=>{l(_),shake(40)})})},o;e(),(o=eqSA(t,".Bookmark_Post input")).length>0&&o.forEach(t=>{aE(t,"change",()=>{tsNotif(PuSet.bookmark.addedBmText),shake(40);let e=t.id.split("-")[1],i=t.parentNode,o={id:e,title:gAt(eqS(i,"label"),"title"),url:gAt(eqS(i,"label"),"url")};_&&_.find(t=>t.id==e)?l(e):$(o)})}),_.length>0&&_.forEach(_=>{egId(t,"bm-"+_.id)&&(egId(t,"bm-"+_.id).checked=!0)})}(document);
